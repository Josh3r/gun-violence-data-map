!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("luma"));else if("function"==typeof define&&define.amd)define(["luma"],e);else{var r="object"==typeof exports?e(require("luma")):e(t.luma);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=27)}([function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return i}),r.d(e,"c",function(){return a});var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI},function(e,r){e.exports=t},function(t,e,r){t.exports=r(37)},function(t,e,r){"use strict";r(10),r(20);r(15);r.d(e,"a",function(){return n}),r.d(e,"c",function(){return i}),r.d(e,"d",function(){return a}),r.d(e,"b",function(){return o});Math.PI,Math.PI;var n={};function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,r=void 0===e?n.precision||4:e;return t=function(t){return Math.round(t/n.EPSILON)*n.EPSILON}(t),"".concat(parseFloat(t.toPrecision(r)))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function o(t,e,r){var i=n.EPSILON;r&&(n.EPSILON=r);try{if(t===e)return!0;if(a(t)&&a(e)){if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(!o(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{n.EPSILON=i}}n.EPSILON=1e-12,n.debug=!1,n.precision=4,n.printTypes=!1,n.printDegrees=!1,n.printRowMajor=!0},function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a}),r.d(e,"c",function(){return s});var n=r(3);function i(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function a(t,e,r){if(n.a.debug&&!function(t,e){if(t.length!==e)return!1;for(var r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(""|r," some fields set to invalid numbers'"));return t}var o={};function s(t,e){o[t]||(o[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}},function(t,e){t.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"e",function(){return a}),r.d(e,"g",function(){return o}),r.d(e,"d",function(){return s}),r.d(e,"c",function(){return u}),r.d(e,"l",function(){return c}),r.d(e,"k",function(){return h}),r.d(e,"m",function(){return l}),r.d(e,"h",function(){return E}),r.d(e,"i",function(){return f}),r.d(e,"j",function(){return _}),r.d(e,"a",function(){return T}),r.d(e,"f",function(){return A});var n=r(0);function i(){var t=new n.a(3);return n.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t,e,r){var i=new n.a(3);return i[0]=t,i[1]=e,i[2]=r,i}function o(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}function c(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function h(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function l(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],u=e[1],c=e[2],h=i*c-a*u,l=a*s-n*c,E=n*u-i*s,f=i*E-a*l,_=a*h-n*E,T=n*l-i*h,R=2*o;return h*=R,l*=R,E*=R,f*=2,_*=2,T*=2,t[0]=s+h+f,t[1]=u+l+_,t[2]=c+E+T,t}function E(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function f(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function _(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function T(t,e){var r=a(t[0],t[1],t[2]),n=a(e[0],e[1],e[2]);o(r,r),o(n,n);var i=s(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}var R,A=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)};R=i()},function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"g",function(){return a}),r.d(e,"c",function(){return o}),r.d(e,"l",function(){return s}),r.d(e,"a",function(){return u}),r.d(e,"k",function(){return c}),r.d(e,"h",function(){return h}),r.d(e,"m",function(){return l}),r.d(e,"j",function(){return E}),r.d(e,"d",function(){return f}),r.d(e,"i",function(){return _}),r.d(e,"n",function(){return T}),r.d(e,"o",function(){return R}),r.d(e,"f",function(){return A}),r.d(e,"e",function(){return d});var n=r(0);function i(t){var e=new n.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,r,i){var a=new n.a(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=i,a}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function c(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function h(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function l(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function E(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function f(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function _(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function T(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function R(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2],c=r[3],h=c*n+s*a-u*i,l=c*i+u*n-o*a,E=c*a+o*i-s*n,f=-o*n-s*i-u*a;return t[0]=h*c+f*-o+l*-u-E*-s,t[1]=l*c+f*-s+E*-o-h*-u,t[2]=E*c+f*-u+h*-s-l*-o,t[3]=e[3],t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function d(t,e){var r=t[0],i=t[1],a=t[2],o=t[3],s=e[0],u=e[1],c=e[2],h=e[3];return Math.abs(r-s)<=n.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=n.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-h)<=n.b*Math.max(1,Math.abs(o),Math.abs(h))}var p,v;p=new n.a(4),n.a!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0,p[3]=0),v=p},function(t,e,r){"use strict";var n=r(23);r.d(e,"a",function(){return n.a}),r.d(e,"b",function(){return n.b}),r.d(e,"c",function(){return n.c}),r.d(e,"d",function(){return n.d})},function(t,e,r){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r(16);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(n.a)(t,e)}},function(t,e,r){"use strict";var n=r(10);function i(t,e){return!e||"object"!==Object(n.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";function n(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";var n=r(12),i=r(11),a=r(14),o=r(9),s=r(13),u=r(16);var c=r(20);function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Object(c.a)(t,arguments,Object(o.a)(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(u.a)(n,t)})(t)}var l=r(3);r.d(e,"a",function(){return E});var E=function(t){function e(){return Object(n.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}},{key:"to",value:function(t){return t===this?this:Object(l.d)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(l.a)}},{key:"formatString",value:function(t){for(var e="",r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+Object(l.c)(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(l.b)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,r){void 0===r&&(r=e,e=t,t=this);for(var n=0;n<this.ELEMENTS;++n){var i=t[n];this[n]=i+r*(e[n]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"check",value:function(){if(l.a.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"elements",get:function(){return this}}]),e}(h(Array))},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s});var i=r(10),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,s="object"!==(void 0===n?"undefined":Object(i.a)(n))||"[object process]"!==String(n)||n.browser,u=void 0!==n&&n.version&&n.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,r(22),r(38))},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],i=e[1],a=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/a,t[1]=(r[1]*n+r[5]*i)/a,t}function i(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a||1;return t[0]=(r[0]*n+r[4]*i+r[8]*a)/o,t[1]=(r[1]*n+r[5]*i+r[9]*a)/o,t[2]=(r[2]*n+r[6]*i+r[10]*a)/o,t}function a(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}r.d(e,"a",function(){return n}),r.d(e,"c",function(){return i}),r.d(e,"b",function(){return a})},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r(16);function i(t,e,r){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&Object(n.a)(a,r.prototype),a}).apply(null,arguments)}},function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(e,"a",function(){return n})},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){var n=r(8),i=r(26);r.d(e,"c",function(){return i.a});var a=r(24);r.d(e,"a",function(){return a.a});var o=r(25);r.d(e,"b",function(){return o.a});var s=r(3);r.d(e,"d",function(){return s.a});var u={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t};(u.global||u.self||u.window).mathgl={config:n.d}}).call(this,r(22))},function(t,e,r){"use strict";var n=r(21),i=r(12),a=r(14),o=r(9),s=r(11),u=r(13),c=r(4),h=r(17),l=r(3),E=function(t){function e(){return Object(i.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"toString",value:function(){var t="[";if(l.a.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var r=0;r<this.RANK;++r)t+=" ".concat(this[r*this.RANK+e])}else{t+="column-major:";for(var n=0;n<this.ELEMENTS;++n)t+=" ".concat(this[n])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,r){return this[e*this.RANK+t]=Object(c.a)(r),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),r=t*this.RANK,n=0;n<this.RANK;++n)e[n]=this[r+n];return e}},{key:"setColumn",value:function(t,e){for(var r=t*this.RANK,n=0;n<this.RANK;++n)this[r+n]=e[n];return this}}]),e}(h.a),f=r(19),_=r(0);function T(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],E=e[9],f=e[10],_=e[11],T=e[12],R=e[13],A=e[14],d=e[15],p=r[0],v=r[1],O=r[2],N=r[3];return t[0]=p*n+v*s+O*l+N*T,t[1]=p*i+v*u+O*E+N*R,t[2]=p*a+v*c+O*f+N*A,t[3]=p*o+v*h+O*_+N*d,p=r[4],v=r[5],O=r[6],N=r[7],t[4]=p*n+v*s+O*l+N*T,t[5]=p*i+v*u+O*E+N*R,t[6]=p*a+v*c+O*f+N*A,t[7]=p*o+v*h+O*_+N*d,p=r[8],v=r[9],O=r[10],N=r[11],t[8]=p*n+v*s+O*l+N*T,t[9]=p*i+v*u+O*E+N*R,t[10]=p*a+v*c+O*f+N*A,t[11]=p*o+v*h+O*_+N*d,p=r[12],v=r[13],O=r[14],N=r[15],t[12]=p*n+v*s+O*l+N*T,t[13]=p*i+v*u+O*E+N*R,t[14]=p*a+v*c+O*f+N*A,t[15]=p*o+v*h+O*_+N*d,t}function R(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}A=new _.a(2),_.a!=Float32Array&&(A[0]=0,A[1]=0),d=A;var A,d,p=r(6),v=r(7);r.d(e,"a",function(){return y});var O=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),N=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),S=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),m={},y=function(t){function e(t){var r;return Object(i.a)(this,e),r=Object(a.a)(this,Object(o.a)(e).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(u.a)(e,t),Object(s.a)(e,[{key:"INDICES",get:function(){return S}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return m.IDENTITY=m.IDENTITY||Object.freeze(new e(O)),m.IDENTITY}},{key:"ZERO",get:function(){return m.ZERO=m.ZERO||Object.freeze(new e(N)),m.ZERO}}]),Object(s.a)(e,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,r,n,i,a,o,s,u,c,h,l,E,f,_,T){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=h,this[11]=l,this[12]=E,this[13]=f,this[14]=_,this[15]=T,this.check()}},{key:"setRowMajor",value:function(t,e,r,n,i,a,o,s,u,c,h,l,E,f,_,T){return this[0]=t,this[1]=i,this[2]=u,this[3]=E,this[4]=e,this[5]=a,this[6]=c,this[7]=f,this[8]=r,this[9]=o,this[10]=h,this[11]=_,this[12]=n,this[13]=s,this[14]=l,this[15]=T,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(O)}},{key:"fromQuaternion",value:function(t){return function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,h=n*o,l=n*s,E=i*o,f=i*s,_=i*u,T=a*o,R=a*s,A=a*u;t[0]=1-l-_,t[1]=h+A,t[2]=E-R,t[3]=0,t[4]=h-A,t[5]=1-c-_,t[6]=f+T,t[7]=0,t[8]=E+R,t[9]=f-T,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}},{key:"frustum",value:function(t){var r=t.left,n=t.right,i=t.bottom,a=t.top,o=t.near,s=t.far;return s===1/0?e._computeInfinitePerspectiveOffCenter(this,r,n,i,a,o):function(t,e,r,n,i,a,o){var s=1/(r-e),u=1/(i-n),c=1/(a-o);t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0}(this,r,n,i,a,o,s),this.check()}},{key:"lookAt",value:function(t,e,r){if(1===arguments.length){var n=t;t=n.eye,e=n.center,r=n.up}return function(t,e,r,n){var i,a,o,s,u,c,h,l,E,f,T=e[0],R=e[1],A=e[2],d=n[0],p=n[1],v=n[2],O=r[0],N=r[1],S=r[2];Math.abs(T-O)<_.b&&Math.abs(R-N)<_.b&&Math.abs(A-S)<_.b?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(h=T-O,l=R-N,E=A-S,i=p*(E*=f=1/Math.sqrt(h*h+l*l+E*E))-v*(l*=f),a=v*(h*=f)-d*E,o=d*l-p*h,(f=Math.sqrt(i*i+a*a+o*o))?(i*=f=1/f,a*=f,o*=f):(i=0,a=0,o=0),s=l*o-E*a,u=E*i-h*o,c=h*a-l*i,(f=Math.sqrt(s*s+u*u+c*c))?(s*=f=1/f,u*=f,c*=f):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=a,t[5]=u,t[6]=l,t[7]=0,t[8]=o,t[9]=c,t[10]=E,t[11]=0,t[12]=-(i*T+a*R+o*A),t[13]=-(s*T+u*R+c*A),t[14]=-(h*T+l*R+E*A),t[15]=1)}(this,t,e=e||[0,0,0],r=r||[0,1,0]),this.check()}},{key:"ortho",value:function(t){var e=t.left,r=t.right,n=t.bottom,i=t.top,a=t.near,o=void 0===a?.1:a,s=t.far;return function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),c=1/(a-o);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1}(this,e,r,n,i,o,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(t){var r=t.fovy,n=void 0===r?45*Math.PI/180:r,i=t.aspect,a=void 0===i?1:i,o=t.focalDistance,s=void 0===o?1:o,u=t.near,c=void 0===u?.1:u,h=t.far,l=void 0===h?500:h;if(n>2*Math.PI)throw Error("radians");var E=n/2,f=s*Math.tan(E),_=f*a;return(new e).ortho({left:-_,right:_,bottom:-f,top:f,near:c,far:l})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,r=t.fov,n=void 0===r?45*Math.PI/180:r,i=t.aspect,a=void 0===i?1:i,o=t.near,s=void 0===o?.1:o,u=t.far,c=void 0===u?500:u;if((e=e||n)>2*Math.PI)throw Error("radians");return function(t,e,r,n,i){var a,o=1/Math.tan(e/2);t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n)}(this,e,a,s,c),this.check()}},{key:"determinant",value:function(){return e=(t=this)[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],h=t[9],l=t[10],E=t[11],f=t[12],_=t[13],T=t[14],R=t[15],(e*o-r*a)*(l*R-E*T)-(e*s-n*a)*(h*R-E*_)+(e*u-i*a)*(h*T-l*_)+(r*s-n*o)*(c*R-E*f)-(r*u-i*o)*(c*T-l*f)+(n*u-i*s)*(c*_-h*f);var t,e,r,n,i,a,o,s,u,c,h,l,E,f,_,T,R}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*n,t[5]=this[5]*i,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*n,t[9]=this[9]*i,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=this[4]*n,t[4]=this[5]*i,t[5]=this[6]*a,t[6]=this[8]*n,t[7]=this[9]*i,t[8]=this[10]*a,t}},{key:"transpose",value:function(){return function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}},{key:"invert",value:function(){return function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],l=e[9],E=e[10],f=e[11],_=e[12],T=e[13],R=e[14],A=e[15],d=r*s-n*o,p=r*u-i*o,v=r*c-a*o,O=n*u-i*s,N=n*c-a*s,S=i*c-a*u,m=h*T-l*_,y=h*R-E*_,M=h*A-f*_,I=l*R-E*T,g=l*A-f*T,L=E*A-f*R,C=d*L-p*g+v*I+O*M-N*y+S*m;C&&(C=1/C,t[0]=(s*L-u*g+c*I)*C,t[1]=(i*g-n*L-a*I)*C,t[2]=(T*S-R*N+A*O)*C,t[3]=(E*N-l*S-f*O)*C,t[4]=(u*M-o*L-c*y)*C,t[5]=(r*L-i*M+a*y)*C,t[6]=(R*v-_*S-A*p)*C,t[7]=(h*S-E*v+f*p)*C,t[8]=(o*g-s*M+c*m)*C,t[9]=(n*M-r*g-a*m)*C,t[10]=(_*N-T*v+A*d)*C,t[11]=(l*v-h*N-f*d)*C,t[12]=(s*y-o*I-u*m)*C,t[13]=(r*I-n*y+i*m)*C,t[14]=(T*p-_*O-R*d)*C,t[15]=(h*O-l*p+E*d)*C)}(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return T(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return T(this,this,t),this.check()}},{key:"rotateX",value:function(t){return function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],h=e[9],l=e[10],E=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+h*n,t[6]=s*i+l*n,t[7]=u*i+E*n,t[8]=c*i-a*n,t[9]=h*i-o*n,t[10]=l*i-s*n,t[11]=E*i-u*n}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],h=e[9],l=e[10],E=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-h*n,t[2]=s*i-l*n,t[3]=u*i-E*n,t[8]=a*n+c*i,t[9]=o*n+h*i,t[10]=s*n+l*i,t[11]=u*n+E*i}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],h=e[5],l=e[6],E=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+h*n,t[2]=s*i+l*n,t[3]=u*i+E*n,t[4]=c*i-a*n,t[5]=h*i-o*n,t[6]=l*i-s*n,t[7]=E*i-u*n}(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(n.a)(t,3),r=e[0],i=e[1],a=e[2];return this.rotateX(r).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(t,e){return function(t,e,r,n){var i,a,o,s,u,c,h,l,E,f,T,R,A,d,p,v,O,N,S,m,y,M,I,g,L=n[0],C=n[1],b=n[2],F=Math.sqrt(L*L+C*C+b*b);F<_.b||(L*=F=1/F,C*=F,b*=F,i=Math.sin(r),o=1-(a=Math.cos(r)),s=e[0],u=e[1],c=e[2],h=e[3],l=e[4],E=e[5],f=e[6],T=e[7],R=e[8],A=e[9],d=e[10],p=e[11],v=L*L*o+a,O=C*L*o+b*i,N=b*L*o-C*i,S=L*C*o-b*i,m=C*C*o+a,y=b*C*o+L*i,M=L*b*o+C*i,I=C*b*o-L*i,g=b*b*o+a,t[0]=s*v+l*O+R*N,t[1]=u*v+E*O+A*N,t[2]=c*v+f*O+d*N,t[3]=h*v+T*O+p*N,t[4]=s*S+l*m+R*y,t[5]=u*S+E*m+A*y,t[6]=c*S+f*m+d*y,t[7]=h*S+T*m+p*y,t[8]=s*M+l*I+R*g,t[9]=u*M+E*I+A*g,t[10]=c*M+f*I+d*g,t[11]=h*M+T*I+p*g,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?R(this,this,t):R(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return function(t,e,r){var n,i,a,o,s,u,c,h,l,E,f,_,T=r[0],R=r[1],A=r[2];e===t?(t[12]=e[0]*T+e[4]*R+e[8]*A+e[12],t[13]=e[1]*T+e[5]*R+e[9]*A+e[13],t[14]=e[2]*T+e[6]*R+e[10]*A+e[14],t[15]=e[3]*T+e[7]*R+e[11]*A+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],l=e[8],E=e[9],f=e[10],_=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=l,t[9]=E,t[10]=f,t[11]=_,t[12]=n*T+s*R+l*A+e[12],t[13]=i*T+u*R+E*A+e[13],t[14]=a*T+c*R+f*A+e[14],t[15]=o*T+h*R+_*A+e[15])}(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=v.n(e||[-0,-0,-0,-0],t,this),Object(c.b)(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}(e||[-0,-0],t,this);break;case 3:e=p.l(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=Object(f.a)(e||[-0,-0],t,this);break;case 3:e=Object(f.c)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,r){return this.identity().translate([t,e,r])}},{key:"transformPoint",value:function(t,e){return Object(c.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return Object(c.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,r,n,i,a){var o=2*a/(r-e),s=2*a/(i-n),u=(r+e)/(r-e),c=(i+n)/(i-n),h=-2*a;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}}]),e}(E)},function(t,e,r){"use strict";var n=r(12),i=r(11),a=r(14),o=r(9),s=r(13),u=r(17),c=r(4),h=r(15),l=r(0);var E=r(6),f=r(7);function _(){var t=new l.a(4);return l.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function T(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function R(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=r[3];return t[0]=n*h+o*s+i*c-a*u,t[1]=i*h+o*u+a*s-n*c,t[2]=a*h+o*c+n*u-i*s,t[3]=o*h-n*s-i*u-a*c,t}function A(t,e,r,n){var i,a,o,s,u,c=e[0],h=e[1],E=e[2],f=e[3],_=r[0],T=r[1],R=r[2],A=r[3];return(a=c*_+h*T+E*R+f*A)<0&&(a=-a,_=-_,T=-T,R=-R,A=-A),1-a>l.b?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),t[0]=s*c+u*_,t[1]=s*h+u*T,t[2]=s*E+u*R,t[3]=s*f+u*A,t}function d(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[a]=(e[3*a+i]+e[3*i+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r}return t}f.b,f.g,f.c,f.l;var p,v,O,N,S,m,y,M=f.a,I=f.k,g=f.d,L=f.i,C=f.h,b=f.m,F=f.j,P=(f.f,f.e,p=E.b(),v=E.e(1,0,0),O=E.e(0,1,0),function(t,e,r){var n=E.d(e,r);return n<-.999999?(E.c(p,v,e),E.f(p)<1e-6&&E.c(p,O,e),E.g(p,p),T(t,p,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(E.c(p,e,r),t[0]=p[0],t[1]=p[1],t[2]=p[2],t[3]=1+n,F(t,t))});N=_(),S=_(),m=new l.a(9),l.a!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,y=m;r.d(e,"a",function(){return B});var x=[0,0,0,1],B=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(n.a)(this,e),t=Object(a.a)(this,Object(o.a)(e).call(this,-0,-0,-0,-0)),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,i,s,u),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,r,n){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this.check()}},{key:"fromMatrix3",value:function(t){return d(this,t),this.check()}},{key:"identity",value:function(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}},{key:"fromAxisRotation",value:function(t,e){return T(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"len",value:function(){return C(this)}},{key:"lengthSquared",value:function(t){return b(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return g(this,t)}},{key:"rotationTo",value:function(t,e){return P(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return M(this,this,t),this.check()}},{key:"calculateW",value:function(){return function(t,e){var r=e[0],n=e[1],i=e[2];t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i))}(this,this),this.check()}},{key:"conjugate",value:function(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}},{key:"invert",value:function(){return function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s}(this,this),this.check()}},{key:"lerp",value:function(t,e,r){return L(this,t,e,r),this.check()}},{key:"multiplyRight",value:function(t,e){return Object(h.a)(!e),R(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return Object(h.a)(!e),R(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-n*s}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);t[0]=n*u-a*s,t[1]=i*u+o*s,t[2]=a*u+n*s,t[3]=o*u-i*s}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=a*u+o*s,t[3]=o*u-a*s}(this,this,t),this.check()}},{key:"scale",value:function(t){return I(this,this,t),this.check()}},{key:"slerp",value:function(t,e,r){switch(arguments.length){case 1:var n=arguments[0],i=n.start;t=void 0===i?x:i,e=n.target,r=n.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);e=a[0],r=a[1],t=this}return A(this,t,e,r),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return f.o(e,t,this),Object(c.b)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(c.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(c.a)(t)}}]),e}(u.a)},function(t,e,r){"use strict";var n=r(12),i=r(11),a=r(14),o=r(9),s=r(13),u=r(17),c=r(4),h=r(15),l=function(t){function e(){return Object(n.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-t[r];e+=n*n}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return Object(h.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return Object(h.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(c.a)(t)}}]),e}(u.a),E=r(3),f=r(6),_=r(19);r.d(e,"a",function(){return R});var T=[0,0,0],R=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n.a)(this,e),t=Object(a.a)(this,Object(o.a)(e).call(this,-0,-0,-0)),1===arguments.length&&Object(E.d)(r)?t.copy(r):(E.a.debug&&(Object(c.a)(r),Object(c.a)(i),Object(c.a)(s)),t[0]=r,t[1]=i,t[2]=s),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"set",value:function(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return E.a.debug&&(Object(c.a)(t.x),Object(c.a)(t.y),Object(c.a)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"angle",value:function(t){return f.a(this,t)}},{key:"cross",value:function(t){return f.c(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?T:r;return f.h(this,this,n,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?T:r;return f.i(this,this,n,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?T:r;return f.j(this,this,n,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return f.l(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(_.c)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return f.k(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Object(_.b)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return f.m(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}}]),e}(l)},function(t,e,r){(function(e){const n=r(39),i="undefined"==typeof window?e:window;i.loaders=i.luma||{},t.exports=Object.assign(i.luma,n)}).call(this,r(22))},,,,,,,,,,function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof T?e:T,a=Object.create(i.prototype),o=new I(n||[]);return a._invoke=function(t,e,r){var n=h;return function(i,a){if(n===E)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return L()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=m(o,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=E;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?f:l,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",l="suspendedYield",E="executing",f="completed",_={};function T(){}function R(){}function A(){}var d={};d[a]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(g([])));v&&v!==r&&n.call(v,a)&&(d=v);var O=A.prototype=T.prototype=Object.create(d);function N(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(r,i){function a(){return new Promise(function(e,a){!function e(r,i,a,o){var s=c(t[r],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(h).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,o)})}o(s.arg)}(r,i,e,a)})}return e=e?e.then(a,a):a()}}function m(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,m(t,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function y(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(y,this),this.reset(!0)}function g(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:L}}function L(){return{value:e,done:!0}}return R.prototype=O.constructor=A,A.constructor=R,A[s]=R.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===R||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},N(S.prototype),S.prototype[o]=function(){return this},t.AsyncIterator=S,t.async=function(e,r,n,i){var a=new S(u(e,r,n,i));return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},N(O),O[s]="Generator",O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=g,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:g(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,c=[],h=!1,l=-1;function E(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&f())}function f(){if(!h){var t=s(E);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function T(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new _(t,e)),1!==c.length||h||s(f)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=T,i.addListener=T,i.once=T,i.off=T,i.removeListener=T,i.removeAllListeners=T,i.emit=T,i.prependListener=T,i.prependOnceListener=T,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";r.r(e);var n=r(1);class i{getViews(t){const{width:e,height:r}=t;return[{params:{viewport:[0,0,e,r],scissor:[0,0,e,r],scissorTest:!0}}]}submitFrame(){return!0}requestAnimationFrame(t){return!1}delete(){}_renderFrame(t){const e=this.getViews(t);if(!e)return!1;const{gl:r}=this.animationLoop;for(const i of e)Object(n.withParameters)(r,i.params,()=>this.animationLoop.onRender({...t,...i}));return this.submitFrame(),!0}}class a extends i{static isSupported(){return"undefined"!=typeof navigator&&"getVRDisplays"in navigator&&"VRFrameData"in window}constructor(t){super(t),this._vrSupported=a.isSupported(),this._vrSupported&&(this.vrFrameData=new window.VRFrameData,this.vrPresenting=!1,this.vrFrame=!1,window.addEventListener("vrdisplaypresentchange",this._vrDisplayPresentChange.bind(this)))}delete(){super.delete(),this._removeVRButton()}getViews(t){if(this._vrSupported&&this._addVRButton(),this.vrPresenting&&this.vrFrame){this.vrDisplay.getFrameData(this.vrFrameData);const{leftProjectionMatrix:e,leftViewMatrix:r,rightProjectionMatrix:n,rightViewMatrix:i}=this.vrFrameData,{width:a,height:o}=t;return[{displayEye:"left",projectionMatrix:e,viewMatrix:r,params:{viewport:[0,0,.5*a,o],scissor:[0,0,.5*a,o],scissorTest:!0}},{displayEye:"right",projectionMatrix:n,viewMatrix:i,params:{viewport:[.5*a,0,.5*a,o],scissor:[.5*a,0,.5*a,o],scissorTest:!0}}]}return super.getViews(t)}submitFrame(){return!(!this.vrPresenting||!this.vrFrame)&&(this.vrDisplay.submitFrame(),!0)}requestAnimationFrame(t){return!!this.vrPresenting&&(this.vrDisplay.requestAnimationFrame(()=>{this.vrFrame=!0,t(),this.vrFrame=!1}),!0)}async _addVRButton(){if(this.vrButton)return;const t=this._getCanvas();if(!t)return;const e=await navigator.getVRDisplays();e&&e.length&&(n.log.info(2,"Found VR Displays",e)(),this.vrDisplay=e[0],this.vrButton=function({canvas:t,title:e}){const{top:r,left:n,width:i,height:a}=t.getBoundingClientRect(),o=document.createElement("div");o.style.position="absolute",o.style.top=`${r}px`,o.style.left=`${n}px`,o.style.width=`${i}px`,o.style.height=`${a}px`,o.style.pointerEvents="none",o.style.zIndex="999",document.body.appendChild(o);const s=document.createElement("button");return s.style.padding="16px",s.style.border="1px solid #fff",s.style.borderRadius="8px",s.style.background="rgba(0,0,0,0.5)",s.style.color="#fff",s.style.font="normal 20px sans-serif",s.style.cursor="pointer",s.style.margin="20px auto",s.style.display="block",s.style.pointerEvents="all",s.textContent=e,o.appendChild(s),s}({canvas:t,title:`Enter VR (${this.vrDisplay.displayName})`}),this.vrButton.onclick=()=>this._startDisplay())}_getCanvas(){return this.animationLoop.canvas||this.animationLoop.gl&&this.animationLoop.gl.canvas}_removeVRButton(){this.vrButton}_startDisplay(){this.vrDisplay.requestPresent([{source:this._getCanvas()}])}_vrDisplayPresentChange(){this.vrDisplay.isPresenting?(n.log.info(2,"Entering VR")(),this.vrPresenting=!0,this.vrButton.style.display="none"):(n.log.info(2,"Exiting VR")(),this.vrPresenting=!1,this.vrButton.style.display="block")}}var o=r(5),s=r.n(o);function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=r(2),h=r.n(c);function l(t,e){if(!t)throw new Error(e)}var E=r(10),f=r(18),_="undefined"!=typeof ImageBitmap,T=void 0!==("undefined"==typeof Image?"undefined":Object(E.a)(Image)),R=Boolean(f.a._parseImageNode);function A(t){switch(t){case"imagebitmap":return _;case"html":return T;case"ndarray":return R;default:throw new Error("Unknown image format ".concat(t))}}function d(){var t=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).image||{}).type||"auto";switch(t){case"imagebitmap":case"html":case"ndarray":if(!A(t))throw new Error("Requested image type ".concat(t," not available in current environment"));return t;case"auto":return function(){if(A("ndarray"))return"ndarray";if(A("html"))return"html";if(A("imagebitmap"))return"imagebitmap";if(!f.b)throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js");return l(!1)}();default:throw new Error("Unknown image format ".concat(t))}}var p=r(21),v=!1,O=!0,N=new Map([["image/png",{test:function(t){return t.byteLength>=24&&2303741511===t.getUint32(0,v)},getSize:function(t){return{width:t.getUint32(16,v),height:t.getUint32(20,v)}}}],["image/jpeg",{test:function(t){return t.byteLength>=3&&65496===t.getUint16(0,v)&&255===t.getUint8(2,v)},getSize:function(t){if(t.byteLength<2||65496!==t.getUint16(0,v))return null;var e=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var r=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:r}}(),r=e.tableMarkers,n=e.sofMarkers,i=2;for(;i<t.byteLength;){var a=t.getUint16(i,v);if(n.has(a))return{height:t.getUint16(i+5,v),width:t.getUint16(i+7,v)};if(!r.has(a))return null;i+=2,i+=t.getUint16(i,v)}return null}}],["image/gif",{test:function(t){return t.byteLength>=10&&1195984440===t.getUint32(0,v)},getSize:function(t){return{width:t.getUint16(6,O),height:t.getUint16(8,O)}}}],["image/bmp",{test:function(t){return t.byteLength>=2&&16973===t.getUint16(0,v)},getSize:function(t){return{width:t.getUint32(18,O),height:t.getUint32(22,O)}}}]]);"Invalid MIME type. Supported MIME types are: ".concat(Array.from(N.keys()).join(", "));function S(t){var e=m(t),r=!0,n=!1,i=void 0;try{for(var a,o=N.entries()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=Object(p.a)(a.value,2),u=s[0];if((0,s[1].test)(e))return u}}catch(t){n=!0,i=t}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}function m(t){if((t=t.buffer||t)instanceof ArrayBuffer||ArrayBuffer.isView(t))return new DataView(t.buffer||t);throw new Error("toDataView")}function y(t,e){l(f.a._parseImageNode);var r=S(t);return f.a._parseImageNode(t,r,e)}function M(t,e){var r,n,i;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return"image/jpeg",r=new Blob([t],{type:"image/jpeg"}),n=self.URL||self.webkitURL,i=n.createObjectURL(r),a.prev=4,a.next=7,h.a.awrap(I(i,e));case 7:return a.abrupt("return",a.sent);case 8:return a.prev=8,n.revokeObjectURL(i),a.finish(8);case 11:case"end":return a.stop()}},null,null,[[4,,8,11]])}function I(t,e){var r;return h.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=new Image).src=t,!(e.image&&e.image.decode&&r.decode)){n.next=6;break}return n.next=5,h.a.awrap(r.decode());case 5:return n.abrupt("return",r);case 6:return n.next=8,h.a.awrap(new Promise(function(e,n){try{r.onload=function(){return e(r)},r.onerror=function(e){return n(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(t){n(t)}}));case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}})}function g(t,e){var r=new Blob([new Uint8Array(t)]),n=e&&e.imagebitmap;return n?createImageBitmap(r):createImageBitmap(r,n)}function L(t,e){var r,n,i;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r=new TextDecoder,n=r.decode(t),i="data:image/svg+xml;base64,".concat(btoa(n)),a.next=5,h.a.awrap(I(i,e));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}})}function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function F(t,e,r){var n,i;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if("image"in e&&(e=b({},e,{image:{}})),!(n=(r||{}).url)||!/\.svg((\?|#).*)?$/.test(n)){a.next=7;break}return console.warn("@loaders.gl/images: SVG parsing needs to be fixed for 2.0"),a.next=6,h.a.awrap(L(t,e));case 6:return a.abrupt("return",a.sent);case 7:i=d(e),a.t0=i,a.next="imagebitmap"===a.t0?11:"html"===a.t0?14:"ndarray"===a.t0?17:20;break;case 11:return a.next=13,h.a.awrap(g(t,e));case 13:return a.abrupt("return",a.sent);case 14:return a.next=16,h.a.awrap(M(t,e));case 16:return a.abrupt("return",a.sent);case 17:return a.next=19,h.a.awrap(y(t,e));case 19:return a.abrupt("return",a.sent);case 20:return a.abrupt("return",l(!1));case 21:case"end":return a.stop()}})}function P(t){var e=B(t);if(!e)throw new Error("Not an image");return e}function x(t){switch(P(t)){case"imagebitmap":case"ndarray":return{width:t.width,height:t.height};case"html":return{width:t.naturalWidth,height:t.naturalHeight};default:return l(!1)}}function B(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"html":t&&"object"===Object(E.a)(t)&&t.data&&t.width&&t.height?"ndarray":Array.isArray(t)?"ndarray":null}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function D(t,e,r){var n=t;"function"==typeof t&&(n=t(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e,{},r))),l("string"==typeof n);var i=e.baseUrl;return i&&(n="/"===i[i.length-1]?"".concat(i).concat(n):"".concat(i,"/").concat(n)),n}var w=function(t){return t&&"object"===Object(E.a)(t)};function k(t,e){var r,n=arguments;return h.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return r=n.length>2&&void 0!==n[2]?n[2]:{},i.next=3,h.a.awrap(G(t,e,r));case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}})}function G(t,e,r){var n;return h.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(!Array.isArray(t)){i.next=4;break}return i.next=3,h.a.awrap(j(t,e,r));case 3:return i.abrupt("return",i.sent);case 4:if(!w(t)){i.next=8;break}return i.next=7,h.a.awrap(X(t,e,r));case 7:return i.abrupt("return",i.sent);case 8:return n=t,i.next=11,h.a.awrap(e(n,r));case 11:return i.abrupt("return",i.sent);case 12:case"end":return i.stop()}})}function X(t,e,r){var n,i,a,o;return h.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:for(o in n=[],i={},a=function(a){var o=G(t[a],e,r).then(function(t){i[a]=t});n.push(o)},t)a(o);return s.next=6,h.a.awrap(Promise.all(n));case 6:return s.abrupt("return",i);case 7:case"end":return s.stop()}})}function j(t,e){var r,n,i=arguments;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},n=t.map(function(t){return G(t,e,r)}),a.next=4,h.a.awrap(Promise.all(n));case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}})}function V(t,e,r){return h.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(k(t,function(t){return H(t,e,r)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}function H(t,e,r){var n,i;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fetch(t,r.fetch));case 2:return n=a.sent,a.next=5,h.a.awrap(n.arrayBuffer());case 5:return i=a.sent,a.next=8,h.a.awrap(e(i,r));case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}})}function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function K(t){var e,r,n=arguments;return h.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=n.length>1&&void 0!==n[1]?n[1]:{},i.next=3,h.a.awrap(z(t,e));case 3:return r=i.sent,i.next=6,h.a.awrap(V(r,F,e));case 6:return i.abrupt("return",i.sent);case 7:case"end":return i.stop()}})}function z(t,e){var r,n,i=arguments;return h.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{},0===(n=e&&e.image&&e.image.mipLevels||0)){a.next=8;break}return a.next=5,h.a.awrap(q(t,n,e,r));case 5:a.t0=a.sent,a.next=9;break;case 8:a.t0=D(t,e,r);case 9:return a.abrupt("return",a.t0);case 10:case"end":return a.stop()}})}function q(t,e,r,n){var i,a,o,s,u,c,E,f;return h.a.async(function(_){for(;;)switch(_.prev=_.next){case 0:if(i=[],"auto"!==e){_.next=9;break}return a=D(t,r,Y({},n,{lod:0})),_.next=5,h.a.awrap(H(a,F,r));case 5:o=_.sent,s=x(o),u=s.width,c=s.height,e=Z({width:u,height:c}),i.push(a);case 9:for(l(e>0),E=i.length;E<e;++E)f=D(t,r,Y({},n,{lod:E})),i.push(f);return _.abrupt("return",i);case 12:case"end":return _.stop()}})}function Z(t){var e=t.width,r=t.height;return 1+Math.floor(Math.log2(Math.max(e,r)))}class Q{constructor(t,{brdfLutUrl:e,getTexUrl:r,specularMipLevels:n=10}){this.gl=t,this.brdfLutUrl=e,this.getTexUrl=r,this.specularMipLevels=n}makeCube({id:t,getTextureForFace:e,parameters:r}){const i={};return n.TextureCube.FACES.forEach(t=>{i[t]=e(t)}),new n.TextureCube(this.gl,{id:t,mipmaps:!1,parameters:r,pixels:i})}getDiffuseEnvSampler(){return this._DiffuseEnvSampler||(this._DiffuseEnvSampler=this.makeCube({id:"DiffuseEnvSampler",getTextureForFace:t=>K(this.getTexUrl("diffuse",t,0)),parameters:{[s.a.TEXTURE_WRAP_S]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_WRAP_T]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_MIN_FILTER]:s.a.LINEAR,[s.a.TEXTURE_MAG_FILTER]:s.a.LINEAR}})),this._DiffuseEnvSampler}getSpecularEnvSampler(){return this._SpecularEnvSampler||(this._SpecularEnvSampler=this.makeCube({id:"SpecularEnvSampler",getTextureForFace:t=>{const e=[];for(let r=0;r<=this.specularMipLevels-1;r++)e.push(K(this.getTexUrl("specular",t,r)));return e},parameters:{[s.a.TEXTURE_WRAP_S]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_WRAP_T]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_MIN_FILTER]:s.a.LINEAR_MIPMAP_LINEAR,[s.a.TEXTURE_MAG_FILTER]:s.a.LINEAR}})),this._SpecularEnvSampler}getBrdfTexture(){return this._BrdfTexture||(this._BrdfTexture=new n.Texture2D(this.gl,{id:"brdfLUT",parameters:{[s.a.TEXTURE_WRAP_S]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_WRAP_T]:s.a.CLAMP_TO_EDGE,[s.a.TEXTURE_MIN_FILTER]:s.a.LINEAR,[s.a.TEXTURE_MAG_FILTER]:s.a.LINEAR},data:K(this.brdfLutUrl)})),this._BrdfTexture}delete(){this._DiffuseEnvSampler&&(this._DiffuseEnvSampler.delete(),this._DiffuseEnvSampler=null),this._SpecularEnvSampler&&(this._SpecularEnvSampler.delete(),this._SpecularEnvSampler=null),this._BrdfTexture&&(this._BrdfTexture.delete(),this._BrdfTexture=null)}}var $=r(8);class J{constructor(t={}){const{id:e}=t;this.id=e||Object(n.uid)(this.constructor.name),this.display=!0,this.position=new $.c,this.rotation=new $.c,this.scale=new $.c(1,1,1),this.matrix=new $.a,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(t){return Object(n.assert)(3===t.length,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return Object(n.assert)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return Object(n.assert)(3===t.length,"setScale requires vector argument"),this.scale=t,this}setMatrix(t,e=!0){e?this.matrix.copy(t):this.matrix=t}setMatrixComponents({position:t,rotation:e,scale:r,update:n=!0}){return t&&this.setPosition(t),e&&this.setRotation(e),r&&this.setScale(r),n&&this.updateMatrix(),this}updateMatrix(){const t=this.position,e=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(r),this}update({position:t,rotation:e,scale:r}={}){return t&&this.setPosition(t),e&&this.setRotation(e),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(t,e){Object(n.assert)(t),e=e||this.matrix;const r=new $.a(t).multiplyRight(e),i=r.invert(),a=i.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:a}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}class tt extends J{constructor(t={}){t=Array.isArray(t)?{children:t}:t;const{children:e=[]}=t;n.log.assert(e.every(t=>t instanceof J),"every child must an instance of ScenegraphNode"),super(t),this.children=e}add(...t){for(const e of t)Array.isArray(e)?this.add(...e):this.children.push(e);return this}remove(t){const e=this.children,r=e.indexOf(t);return r>-1&&e.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(t=>t.delete()),this.removeAll(),super.delete()}traverse(t,{worldMatrix:e=new $.a}={}){const r=new $.a(e).multiplyRight(this.matrix);for(const e of this.children)e instanceof tt?e.traverse(t,{worldMatrix:r}):t(e,{worldMatrix:r})}}const et={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function nt(t){if(!t._animation){const e=rt[t.componentType],r=et[t.type],n=r*t.count,{buffer:i,byteOffset:a}=t.bufferView.data,o=new e(i,a+(t.byteOffset||0),n);if(1===r)t._animation=Array.from(o);else{const e=[];for(let t=0;t<o.length;t+=r)e.push(Array.from(o.slice(t,t+r)));t._animation=e}}return t._animation}const it=new $.a;const at=new $.b;function ot(t,{input:e,interpolation:r,output:i},a,o){const s=t%e[e.length-1],u=e.findIndex(t=>t>=s),c=Math.max(0,u-1);if(!Array.isArray(a[o]))switch(o){case"translation":a[o]=[0,0,0];break;case"rotation":a[o]=[0,0,0,1];break;case"scale":a[o]=[1,1,1];break;default:n.log.warn(`Bad animation path ${o}`)()}Object(n.assert)(a[o].length===i[c].length);const h=e[c],l=e[u];switch(r){case"STEP":!function(t,e,r){for(let n=0;n<r.length;n++)t[e][n]=r[n]}(a,o,i[c]);break;case"LINEAR":if(l>h){const t=(s-h)/(l-h);!function(t,e,r,n,i){if("rotation"===e){at.slerp({start:r,target:n,ratio:i});for(let r=0;r<at.length;r++)t[e][r]=at[r]}else for(let a=0;a<r.length;a++)t[e][a]=i*n[a]+(1-i)*r[a]}(a,o,i[c],i[u],t)}break;case"CUBICSPLINE":if(l>h){const t=(s-h)/(l-h),e=l-h;!function(t,e,{p0:r,outTangent0:n,inTangent1:i,p1:a,tDiff:o,ratio:s}){for(let u=0;u<t[e].length;u++){const c=n[u]*o,h=i[u]*o;t[e][u]=(2*Math.pow(s,3)-3*Math.pow(s,2)+1)*r[u]+(Math.pow(s,3)-2*Math.pow(s,2)+s)*c+(-2*Math.pow(s,3)+3*Math.pow(s,2))*a[u]+(Math.pow(s,3)-Math.pow(s,2))*h}}(a,o,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*u+0],p1:i[3*u+1],tDiff:e,ratio:t})}break;default:n.log.warn(`Interpolation ${r} not supported`)()}}class st{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,Object.assign(this,t)}animate(t){if(!this.playing)return;const e=(t/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:t,target:r,path:n})=>{ot(e,t,r,n),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const r=it.fromQuaternion(t.rotation);e.matrix.multiplyRight(r)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)})}}class ut{constructor(t){this.animations=t.animations.map((e,r)=>{const n=e.name||`Animation-${r}`,i=e.samplers.map(({input:e,interpolation:r="LINEAR",output:n})=>({input:nt(t.accessors[e]),interpolation:r,output:nt(t.accessors[n])})),a=e.channels.map(({sampler:e,target:r})=>({sampler:i[e],target:t.nodes[r.node],path:r.path}));return new st({name:n,channels:a})})}animate(t){this.setTime(t)}setTime(t){this.animations.forEach(e=>e.animate(t))}getAnimations(){return this.animations}}class ct extends J{constructor(t,e={}){super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof n.Model?(this.model=t,this._setModelNodeProps(e)):this.model=new n.Model(t,e),this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(t=>t.delete()),this.managedResources=[]}draw(...t){return this.model.draw(...t)}setUniforms(...t){return this.model.setUniforms(...t),this}setAttributes(...t){return this.model.setAttributes(...t),this}updateModuleSettings(...t){return this.model.updateModuleSettings(...t),this}_setModelNodeProps(t){this.model.setProps(t)}}class ht{constructor(t,{attributes:e,material:r,pbrDebug:n,imageBasedLightingEnvironment:i,lights:a,useTangents:o}){this.gl=t,this.defines={USE_TEX_LOD:1,MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],i&&(this.uniforms.u_DiffuseEnvSampler=i.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=i.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=i.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),n&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(e.NORMAL,"HAS_NORMALS"),this.defineIfPresent(e.TANGENT&&o,"HAS_TANGENTS"),this.defineIfPresent(e.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(i,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(n,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e,r=null){const i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},a=new n.Texture2D(this.gl,{id:t.name||t.id,parameters:i,pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},data:t.texture.source.image});this.uniforms[e]=a,this.defineIfPresent(r,r),this.generatedTextures.push(a)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:e=1,roughnessFactor:r=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,r]}parseMaterial(t){if(t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){const{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else"BLEND"===t.alphaMode&&(n.log.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}const lt="\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n",Et="\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n";function ft(t,e){return Object(n.isWebGL2)(t)?`#version 300 es\n${e}`:e}const _t={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Tt={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Rt{constructor(t,e={}){this.gl=t,this.options=Object.assign({},Tt,e)}instantiate(t){return this.gltf=t,(t.scenes||[]).map(t=>this.createScene(t))}createAnimator(){return Array.isArray(this.gltf.animations)?new ut(this.gltf):null}createScene(t){const e=(t.nodes||[]).map(t=>this.createNode(t));return new tt({id:t.name||t.id,children:e})}createNode(t){if(!t._node){const e=(t.children||[]).map(t=>this.createNode(t));t.mesh&&e.push(this.createMesh(t.mesh));const r=new tt({id:t.name||t.id,children:e});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){const e=(new $.a).fromQuaternion(t.rotation);r.matrix.multiplyRight(e)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}createMesh(t){if(!t._mesh){const e=(t.primitives||[]).map((e,r)=>this.createPrimitive(e,r,t)),r=new tt({id:t.name||t.id,children:e});t._mesh=r}return t._mesh}getVertexCount(t){n.log.warn("getVertexCount() not found")()}createPrimitive(t,e,r){return function(t,e){const{id:r,drawMode:i,vertexCount:a,attributes:o,modelOptions:s}=e,u=new ht(t,e);n.log.info(4,"createGLTFModel defines: ",u.defines)();const c=[];c.push(...u.generatedTextures),c.push(...Object.values(o).map(t=>t.buffer));const h=new ct(t,Object.assign({id:r,drawMode:i,vertexCount:a,modules:[n.pbr],defines:u.defines,parameters:u.parameters,vs:ft(t,lt),fs:ft(t,Et),managedResources:c},s));return h.setProps({attributes:o}),h.setUniforms(u.uniforms),h}(this.gl,Object.assign({id:t.name||`${r.name||r.id}-primitive-${e}`,drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}createAttributes(t,e){const r={};return Object.keys(t).forEach(e=>{r[e]=this.createAccessor(t[e],this.createBuffer(t[e],this.gl.ARRAY_BUFFER))}),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),n.log.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:r}=t;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[e]||(r.lumaBuffers[e]=new n.Buffer(this.gl,{id:`from-${r.id}`,data:r.data||t.value,target:e})),r.lumaBuffers[e]}createAccessor(t,e){return new n.Accessor({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:_t[t.type]})}createSampler(t){return t}needsPOT(){return!1}}function At(t,e,r){const n=new Rt(t,r);return{scenes:n.instantiate(e),animator:n.createAnimator()}}const dt="// Get current pixel indices for a given size\nvec2 histoPyramid_getPixelIndices(vec2 size) {\n  vec2 pixelOffset = transform_getPixelSizeHalf(size);\n  vec2 pixelIndices = transform_getPixelIndices(size, pixelOffset);\n  return pixelIndices;\n}\n\n// returns the top left texture coordiante corresponding to 2X2 block in higher level texture.\n// size: lower level texture size\n// scale: usually (2, 2)\n// offset: offset with-in 2X2 block of higher level texture\nvec2 histoPyramid_getTexCoord(vec2 size, vec2 scale, vec2 offset) {\n  // use actual (scaled) texture size to calcualte offset (multiplied by scale)\n  vec2 scaledSize = size * scale;\n\n  // use minified texture size to find corresponding pixel index in out texture\n  vec2 pixelIndices = histoPyramid_getPixelIndices(size);\n\n  // now scale the indices to point to correct 2X2 block\n  pixelIndices = pixelIndices * scale;\n\n  // generate tex coordinate using actual size\n  vec2 texCoord = pixelIndices / scaledSize;\n  vec2 inPixelOffset = transform_getPixelSizeHalf(scaledSize);\n\n  return texCoord + (offset / scaledSize) + inPixelOffset;\n}\n\n// returns pixel value from higher level texture based on scale and offset\n// texSampler: higher level texture sampler\n// size: lower level texture size\n// scale: usually (2, 2)\n// offset: offset with-in 2X2 block of higher level texture\nvec4 histoPyramid_getInput(sampler2D texSampler, vec2 size, vec2 scale, vec2 offset) {\n  vec2 texCoord = histoPyramid_getTexCoord(size, scale, offset);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",pt="attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\n  vec2 size = transform_uSize_outTexture;\n  vec2 scale = vec2(2., 2.);\n  vec4 pixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 0));\n  vec4 rightPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 0));\n  vec4 bottomPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 1));\n  vec4 rightBottomPixel = histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 1));\n  // outTexture = pixel + rightPixel + bottomPixel + rightBottomPixel;\n  outTexture = vec4(\n    pixel.r + pixel.g + pixel.b + pixel.a,\n    rightPixel.r + rightPixel.g + rightPixel.b + rightPixel.a,\n    bottomPixel.r + bottomPixel.g + bottomPixel.b + bottomPixel.a,\n    rightBottomPixel.r + rightBottomPixel.g + rightBottomPixel.b + rightBottomPixel.a\n  );\n}\n",vt="attribute vec4 inTexture;\nvarying vec4 outTexture;\nuniform int channel;\nuniform vec4 padingPixelValue;\n\nvoid main()\n{\n  vec2 size = transform_uSize_outTexture;\n  // vec2 scale = vec2(2., 2.);\n  vec2 scale = transform_uSize_inTexture / transform_uSize_outTexture;\n\n  // Verify if reference to a input texture pixel is out of bounds, if so treat the pixel as (0, 0)\n  vec2 pixelIndices = histoPyramid_getPixelIndices(size);\n  // now scale the indices padded size to point to correct 2X2 block\n  pixelIndices = pixelIndices * vec2(2, 2);\n\n  vec2 baseLevelSize = transform_uSize_inTexture;\n\n  // For all pixels outside of original texture size, return paddingPixelValue\n  bool xInside = pixelIndices.x < baseLevelSize.x;\n  bool yInside = pixelIndices.y < baseLevelSize.y;\n  bool xPlusOneInside = pixelIndices.x + 1. < baseLevelSize.x;\n  bool yPlusOneInside = pixelIndices.y + 1. < baseLevelSize.y;\n\n  vec4 pixel = (xInside && yInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 0))\n    : padingPixelValue;\n\n  vec4 rightPixel = (xPlusOneInside && yInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 0))\n    : padingPixelValue;\n\n  vec4 topPixel = (xInside && yPlusOneInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(0, 1))\n    : padingPixelValue;\n\n  vec4 rightTopPixel = (xPlusOneInside && yPlusOneInside)\n    ? histoPyramid_getInput(transform_uSampler_inTexture, size, scale, vec2(1, 1))\n    : padingPixelValue;\n\n  if (channel == 0) {\n    outTexture = vec4(pixel.r, rightPixel.r, topPixel.r, rightTopPixel.r);\n  }\n  if (channel == 1) {\n    outTexture = vec4(pixel.g, rightPixel.g, topPixel.g, rightTopPixel.g);\n  }\n  if (channel == 2) {\n    outTexture = vec4(pixel.b, rightPixel.b, topPixel.b, rightTopPixel.b);\n  }\n  if (channel == 3) {\n    outTexture = vec4(pixel.a, rightPixel.a, topPixel.a, rightTopPixel.a);\n  }\n}\n",Ot="// Check 2X2 texture block to find relative index the given key index falls into\n// 2X2 block is represented by a single RGBA weight\nint histopyramid_traversal_findRangeIndex(float currentKey, vec4 weights, out float lowerBound) {\n  lowerBound = 0.;\n  float higherBound = 0.;\n  int relativeIndex = 0;\n  for (int i = 0; i < 4; i++) {\n    higherBound = lowerBound + weights[i];\n    relativeIndex = i;\n    if (currentKey >= lowerBound && currentKey < higherBound) {\n      break;\n    }\n    lowerBound = higherBound;\n  }\n  return relativeIndex;\n}\n\n// Maps index in 2X2 block to texture coordiante\n// Assumes the traversal order of lower-left -> lower->right -> upper-left -> upper->right\nvec2 histopyramid_traversal_mapIndexToCoord(int index) {\n  // relativeIndex ->  relativeCoordiante\n  // 0 -> (0, 0)\n  // 1 -> (1, 0)\n  // 2 -> (0, 1)\n  // 3 -> (1, 1)\n  float relativeX = mod(float(index), 2.);\n  float relativeY = (index > 1) ? 1. : 0.;\n  return vec2(relativeX, relativeY);\n}\n\n// Reads weight value from flat histopyramid\nvec4 histopyramid_traversal_getWeight(sampler2D flatPyramid, vec2 size, int level, int numLevels, vec2 offset) {\n  // horizontal offset in flat pyramid for current level\n  float xOffset = pow(2., float(numLevels)) - pow(2., float(numLevels - level));\n  vec2 lowerLeft = vec2(xOffset, 0.);\n  vec2 pixelIndices = lowerLeft + offset;\n\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 coord = pixelIndices / size + pixelSizeHalf;\n\n  return texture2D(flatPyramid, coord);\n}\n",Nt="attribute float keyIndex;\nattribute vec4 flatPyramidTexture;\nvarying vec4 locationAndIndex;\nconst int MAX_LEVELS = 12; // assuming max texture size of 4K\n\nuniform int numLevels;\n\nvoid main()\n{\n  vec2 p = vec2(0., 0.);\n  float currentKey = keyIndex;\n  // for(int level = numLevels - 1; level <= 0; level--) {\n  for(int i = 1; i <= MAX_LEVELS; i++) {\n    int level = numLevels - i;\n    // #1. Get the current pixel values based on current level and current p\n    vec4 weights = histopyramid_traversal_getWeight(transform_uSampler_flatPyramidTexture, transform_uSize_flatPyramidTexture, level, numLevels, p);\n\n    // #2. Check the all weights in current 2X2 (4 values in RGBA channels) and determine the relative coordinate\n    float lowerBound = 0.;\n    int relativeIndex = histopyramid_traversal_findRangeIndex(currentKey, weights, lowerBound);\n    vec2 relativeCoord = histopyramid_traversal_mapIndexToCoord(relativeIndex);\n\n    //#3. Update P and key-index\n    p = 2.0 * p + relativeCoord;\n    currentKey -= lowerBound;\n    if (level == 0) { break; } // Work around for const expression restriction on for loops\n  }\n  locationAndIndex = vec4(p, currentKey, keyIndex);\n}\n";function St(t){const e=Math.ceil(Math.log2(t));return Math.pow(2,e)}const mt={r:0,x:0,g:1,y:1,b:2,z:2,a:3,w:3};function yt(t,e){const{texture:r,channel:i="r",_readData:a=!1}=e;let{width:o,height:u}=r;const c=((o=St(o))>(u=St(u))?o:u)/2,h=Object(n.cloneTextureFrom)(r,{width:c,height:c}),l=new n.Transform(t,{_sourceTextures:{inTexture:r},_targetTexture:h,_targetTextureVarying:"outTexture",vs:`${dt}${vt}`,elementCount:h.width*h.height});let E;l.run({uniforms:{channel:mt[i]||0,padingPixelValue:[0,0,0,0]}}),(a||1===c)&&(E=l.getData({packed:!0}));const f=2*c,_=Object(n.cloneTextureFrom)(r,{width:f,height:f,parameters:{[s.a.TEXTURE_MAG_FILTER]:s.a.NEAREST,[s.a.TEXTURE_MIN_FILTER]:s.a.NEAREST}}),T=l.getFramebuffer();return Object(n.copyToTexture)(T,_,{targetX:0,width:c,height:c}),{textureData:E,baseTexture:h,flatPyramidTexture:_}}function Mt(t,e){const{textureData:r,baseTexture:i,flatPyramidTexture:a}=yt(t,e),{width:o}=i,s=Math.log2(o)+1,u=[i];let c=r;if(s>1){for(let t=1;t<s;t++){const e=o/Math.pow(2,t);u.push(Object(n.cloneTextureFrom)(i,{width:e,height:e}))}const e=new n.Transform(t,{_sourceTextures:{inTexture:u[0]},_targetTexture:u[1],_targetTextureVarying:"outTexture",vs:`${dt}${pt}`,elementCount:u[1].width*u[1].height});let r=o;for(let t=1;t<s;t++){const i=[u[t].width,u[t].height];e.update({_sourceTextures:{inTexture:u[t-1]},_targetTexture:u[t],elementCount:u[t].width*u[t].height}),e.run();const o=e.getFramebuffer();Object(n.copyToTexture)(o,a,{targetX:r,width:i[0],height:i[1]}),r+=i[0]}c=e.getData()}return{pyramidTextures:u,flatPyramidTexture:a,levelCount:s,topLevelData:c}}function It(t,e){const{flatPyramidTexture:r,levelCount:i,topLevelData:a}=Mt(t,e),o=a[0]+a[1]+a[2]+a[3],s=new n.Buffer(t,new Float32Array(o).map((t,e)=>e)),u=new n.Buffer(t,4*o*4);return new n.Transform(t,{sourceBuffers:{keyIndex:s},_sourceTextures:{flatPyramidTexture:r},feedbackBuffers:{locationAndIndex:u},varyings:["locationAndIndex"],vs:`${Ot}${Nt}`,elementCount:o}).run({uniforms:{numLevels:i}}),{locationAndIndexBuffer:u}}r.d(e,"Display",function(){return i}),r.d(e,"VRDisplay",function(){return a}),r.d(e,"GLTFEnvironment",function(){return Q}),r.d(e,"createGLTFObjects",function(){return At}),r.d(e,"ScenegraphNode",function(){return J}),r.d(e,"GroupNode",function(){return tt}),r.d(e,"ModelNode",function(){return ct}),r.d(e,"buildHistopyramidBaseLevel",function(){return yt}),r.d(e,"getHistoPyramid",function(){return Mt}),r.d(e,"histoPyramidGenerateIndices",function(){return It})}])});